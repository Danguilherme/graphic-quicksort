"use strict";function quicksort(a){if(0==a.length)return[];for(var b=[],c=[],d=a[0],e=1;e<a.length;e++)a[e]<d?b.push(a[e]):c.push(a[e]);return quicksort(b).concat(d,quicksort(c))}function Node(a){this.collection=a,this.left=[],this.right=[],this.pivot=null}function quicksortMetadata(a,b,c){if(0==b.length)return[];a=a||{pivot:"middle"};var d;"start"===a.pivot?d=0:"middle"===a.pivot?d=parseInt(b.length/2):"end"===a.pivot&&(d=b.length-1);var e=[],f=[],g=b[d];c=c||new Node(b),c.pivot=g;for(var h=0;h<b.length;h++)h!==d&&(b[h]<g?e.push(b[h]):f.push(b[h]));return c.left=quicksortMetadata(a,e),c.right=quicksortMetadata(a,f),c}console.log("'Allo 'Allo!"),$(function(){function a(a,b){function c(a){return a&&a.collection&&a.collection.length>0?'<span class="collection">'+a.collection.join(", ")+"</span>":""}function d(a,b){a.datum()instanceof Array||(b&&a.append("span").attr("class","pivot").attr("title","Pivot").text(b.datum().pivot),a.selectAll("div.node").data([a.datum().left,a.datum().right]).enter().append("div").attr("class","node").attr("class",function(a,b){return 0==b?"left":"right"}).style("left",function(a){return a.collection?a.collection[0]:0}).html(c).each(function(){d(d3.select(this),a)}))}console.log("Drawing quicksort for collection",b);var e=quicksortMetadata(a,b),f=quicksort(b);console.log("quicksort",f),console.log("metadata",e),$("#drawing-root").children().remove();var g=d3.select("#drawing-root").selectAll("div.root").data([e]).enter().append("div").attr("class","root").html(c);d(g),g.append("span").attr("class","collection collection-result").text(f.join(", "))}function b(b){var c,d=$(b).val();if(-1!=d.search(",")){c=d.split(",");for(var e=0;e<c.length;e++)c[e]=parseFloat(c[e])}else c=d.split("");a(c)}function b(){var b,c=$('[name="pivot-position"]:radio:checked'),d=$("#collection-input"),e=d.val(),f={};if(f.pivot=c.val(),-1!==e.search(",")){b=e.split(",");for(var g=0;g<b.length;g++)b[g]=parseFloat(b[g])}else b=e.split("");return b&&b.length?($("#drawing-root").removeClass("hidden"),void a(f,b)):void $("#drawing-root").addClass("hidden")}$('[name="pivot-position"]:radio').change(b),$("#collection-input").change(b).change().tokenfield(),b($("#collection-input"))});