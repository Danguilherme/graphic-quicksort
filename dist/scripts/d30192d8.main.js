"use strict";function quicksort(a){if(0==a.length)return[];for(var b=[],c=[],d=a[0],e=1;e<a.length;e++)a[e]<d?b.push(a[e]):c.push(a[e]);return quicksort(b).concat(d,quicksort(c))}function Node(a){this.collection=a,this.left=[],this.right=[],this.pivot=null}function quicksortMetadata(a,b){if(0==a.length)return[];var c=[],d=[],e=a[0];b=b||new Node(a),b.pivot=e;for(var f=1;f<a.length;f++)a[f]<e?c.push(a[f]):d.push(a[f]);return b.left=quicksortMetadata(c),b.right=quicksortMetadata(d),b}console.log("'Allo 'Allo!"),$(function(){function a(a){function b(a){return a&&a.collection&&a.collection.length>0?'<span class="collection">'+a.collection.join(", ")+"</span>":""}function c(a,d){a.datum()instanceof Array||(d&&a.append("span").attr("class","pivot").attr("title","Pivot").text(d.datum().pivot),a.selectAll("div.node").data([a.datum().left,a.datum().right]).enter().append("div").attr("class","node").attr("class",function(a,b){return 0==b?"left":"right"}).style("left",function(a){return a.collection?a.collection[0]:0}).html(b).each(function(){c(d3.select(this),a)}))}console.log("Drawing quicksort for collection",a);var d=quicksortMetadata(a),e=quicksort(a);console.log("quicksort",e),console.log("metadata",d),$("#drawing-root").children().remove();var f=d3.select("#drawing-root").selectAll("div.root").data([d]).enter().append("div").attr("class","root").html(b);c(f),f.append("span").attr("class","collection collection-result").text(e.join(", "))}function b(b){var c,d=$(b).val();if(-1!=d.search(",")){c=d.split(",");for(var e=0;e<c.length;e++)c[e]=parseFloat(c[e])}else c=d.split("");a(c)}$("#collection-input").tokenfield().change(function(){b(this)}).keypress(function(a){console.log(a,a.code)}),b($("#collection-input"))});